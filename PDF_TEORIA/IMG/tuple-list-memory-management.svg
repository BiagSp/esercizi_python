<svg viewBox="0 0 800 1400" xmlns="http://www.w3.org/2000/svg">
  <!-- Sfondo principale -->
  <rect width="800" height="1400" fill="#ffffff" />

  <!-- Titolo principale -->
  <text x="400" y="40" font-family="Arial" font-size="24" text-anchor="middle" font-weight="bold" fill="#0000CC">Gestione della Memoria: Tuple con Elementi Mutabili</text>

  <!-- ======= FASE 1: CREAZIONE DI UNA TUPLA CONTENENTE LISTE ======= -->
  <text x="400" y="80" font-family="Arial" font-size="22" text-anchor="middle" font-weight="bold" fill="#0000CC">Fase 1: Creazione di una tupla contenente liste</text>

  <!-- Box descrizione operazione -->
  <rect x="180" y="100" width="220" height="80" rx="20" ry="20" fill="#f0f0f0" stroke="#cccccc" stroke-width="1" />
  <text x="290" y="130" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">t = (1, [2, 3], [4, 5])</text>
  <text x="290" y="160" font-family="Arial" font-size="14" text-anchor="middle">Tupla con due liste come</text>
  <text x="290" y="180" font-family="Arial" font-size="14" text-anchor="middle">elementi interni</text>

  <!-- Titoli delle colonne -->
  <text x="480" y="130" font-family="Arial" font-size="20" text-anchor="middle" font-weight="bold">Variabile</text>
  <text x="680" y="130" font-family="Arial" font-size="20" text-anchor="middle" font-weight="bold">Memoria</text>

  <!-- Box variabile t -->
  <rect x="400" y="200" width="160" height="60" rx="10" ry="10" fill="#4da6ff" stroke="#0066cc" stroke-width="2" />
  <text x="480" y="240" font-family="Arial" font-size="18" text-anchor="middle" fill="#ffffff">t =</text>

  <!-- Box memoria della tupla -->
  <rect x="600" y="200" width="160" height="60" rx="10" ry="10" fill="#ccffcc" stroke="#00cc00" stroke-width="2" />
  <text x="680" y="225" font-family="Arial" font-size="16" text-anchor="middle">TUPLA</text>
  <text x="680" y="245" font-family="Arial" font-size="14" text-anchor="middle">(1, [2,3], [4,5])</text>
  <text x="680" y="265" font-family="Arial" font-size="12" text-anchor="middle" fill="#666666">id: 140423456789</text>
  
  <!-- Elementi individuali -->
  <rect x="580" y="300" width="60" height="40" rx="5" ry="5" fill="#f2f2f2" stroke="#666666" stroke-width="1" />
  <text x="610" y="325" font-family="Arial" font-size="16" text-anchor="middle">1</text>
  
  <rect x="650" y="300" width="70" height="40" rx="5" ry="5" fill="#ffdddd" stroke="#cc0000" stroke-width="1" />
  <text x="685" y="325" font-family="Arial" font-size="16" text-anchor="middle">[2, 3]</text>
  <text x="685" y="345" font-family="Arial" font-size="10" text-anchor="middle" fill="#666666">id: 140423456800</text>
  
  <rect x="730" y="300" width="70" height="40" rx="5" ry="5" fill="#ffdddd" stroke="#cc0000" stroke-width="1" />
  <text x="765" y="325" font-family="Arial" font-size="16" text-anchor="middle">[4, 5]</text>
  <text x="765" y="345" font-family="Arial" font-size="10" text-anchor="middle" fill="#666666">id: 140423456811</text>

  <!-- Collegamenti -->
  <line x1="680" y1="260" x2="610" y2="300" stroke="#333333" stroke-width="1.5" marker-end="url(#arrowhead)" />
  <line x1="680" y1="260" x2="685" y2="300" stroke="#333333" stroke-width="1.5" marker-end="url(#arrowhead)" />
  <line x1="680" y1="260" x2="765" y2="300" stroke="#333333" stroke-width="1.5" marker-end="url(#arrowhead)" />
  
  <!-- Definizione puntatore freccia -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333333" />
    </marker>
  </defs>
  
  <!-- Spiegazione -->
  <text x="480" y="380" font-family="Arial" font-size="14" text-anchor="middle">La tupla contiene tre elementi: un intero (immutabile) e due liste (mutabili).</text>
  <text x="480" y="400" font-family="Arial" font-size="14" text-anchor="middle">La tupla in memoria è composta da riferimenti (puntatori) ai suoi elementi.</text>
  <text x="480" y="420" font-family="Arial" font-size="14" text-anchor="middle">Gli oggetti lista hanno i propri ID in memoria e sono indipendenti dalla tupla.</text>

  <!-- ======= FASE 2: CREAZIONE DI UNA COPIA DELLA TUPLA ======= -->
  <text x="400" y="470" font-family="Arial" font-size="22" text-anchor="middle" font-weight="bold" fill="#0000CC">Fase 2: Creazione di una copia della tupla</text>

  <!-- Box descrizione operazione -->
  <rect x="180" y="490" width="220" height="80" rx="20" ry="20" fill="#f0f0f0" stroke="#cccccc" stroke-width="1" />
  <text x="290" y="520" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">t_copia = t</text>
  <text x="290" y="545" font-family="Arial" font-size="14" text-anchor="middle">Assegnazione diretta</text>
  <text x="290" y="565" font-family="Arial" font-size="14" text-anchor="middle">(stessi riferimenti)</text>

  <!-- Titoli delle colonne -->
  <text x="480" y="520" font-family="Arial" font-size="20" text-anchor="middle" font-weight="bold">Variabile</text>
  <text x="680" y="520" font-family="Arial" font-size="20" text-anchor="middle" font-weight="bold">Memoria</text>

  <!-- Box variabile t -->
  <rect x="400" y="570" width="160" height="60" rx="10" ry="10" fill="#4da6ff" stroke="#0066cc" stroke-width="2" />
  <text x="480" y="610" font-family="Arial" font-size="18" text-anchor="middle" fill="#ffffff">t =</text>

  <!-- Box variabile t_copia -->
  <rect x="400" y="640" width="160" height="60" rx="10" ry="10" fill="#4da6ff" stroke="#0066cc" stroke-width="2" />
  <text x="480" y="680" font-family="Arial" font-size="18" text-anchor="middle" fill="#ffffff">t_copia =</text>

  <!-- Box memoria della tupla -->
  <rect x="600" y="600" width="160" height="60" rx="10" ry="10" fill="#ccffcc" stroke="#00cc00" stroke-width="2" />
  <text x="680" y="625" font-family="Arial" font-size="16" text-anchor="middle">TUPLA</text>
  <text x="680" y="645" font-family="Arial" font-size="14" text-anchor="middle">(1, [2,3], [4,5])</text>
  <text x="680" y="665" font-family="Arial" font-size="12" text-anchor="middle" fill="#666666">id: 140423456789</text>
  
  <!-- Elementi individuali -->
  <rect x="580" y="700" width="60" height="40" rx="5" ry="5" fill="#f2f2f2" stroke="#666666" stroke-width="1" />
  <text x="610" y="725" font-family="Arial" font-size="16" text-anchor="middle">1</text>
  
  <rect x="650" y="700" width="70" height="40" rx="5" ry="5" fill="#ffdddd" stroke="#cc0000" stroke-width="1" />
  <text x="685" y="725" font-family="Arial" font-size="16" text-anchor="middle">[2, 3]</text>
  <text x="685" y="745" font-family="Arial" font-size="10" text-anchor="middle" fill="#666666">id: 140423456800</text>
  
  <rect x="730" y="700" width="70" height="40" rx="5" ry="5" fill="#ffdddd" stroke="#cc0000" stroke-width="1" />
  <text x="765" y="725" font-family="Arial" font-size="16" text-anchor="middle">[4, 5]</text>
  <text x="765" y="745" font-family="Arial" font-size="10" text-anchor="middle" fill="#666666">id: 140423456811</text>

  <!-- Collegamenti -->
  <line x1="560" y1="595" x2="680" y2="595" stroke="#333333" stroke-width="1.5" marker-end="url(#arrowhead)" />
  <line x1="560" y1="670" x2="680" y2="670" stroke="#333333" stroke-width="1.5" marker-end="url(#arrowhead)" />
  <line x1="680" y1="660" x2="610" y2="700" stroke="#333333" stroke-width="1.5" marker-end="url(#arrowhead)" />
  <line x1="680" y1="660" x2="685" y2="700" stroke="#333333" stroke-width="1.5" marker-end="url(#arrowhead)" />
  <line x1="680" y1="660" x2="765" y2="700" stroke="#333333" stroke-width="1.5" marker-end="url(#arrowhead)" />
  
  <!-- Spiegazione -->
  <text x="480" y="770" font-family="Arial" font-size="14" text-anchor="middle">Entrambe le variabili, t e t_copia, puntano alla stessa tupla in memoria.</text>
  <text x="480" y="790" font-family="Arial" font-size="14" text-anchor="middle">Non viene creata una nuova tupla, solo un nuovo riferimento allo stesso oggetto.</text>

  <!-- ======= FASE 3: MODIFICA DI UNA LISTA ALL'INTERNO DELLA TUPLA ======= -->
  <text x="400" y="840" font-family="Arial" font-size="22" text-anchor="middle" font-weight="bold" fill="#0000CC">Fase 3: Modifica di una lista all'interno della tupla</text>

  <!-- Box descrizione operazione -->
  <rect x="180" y="870" width="220" height="80" rx="20" ry="20" fill="#f0f0f0" stroke="#cccccc" stroke-width="1" />
  <text x="290" y="900" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">t[1].append(6)</text>
  <text x="290" y="925" font-family="Arial" font-size="14" text-anchor="middle">Modifica della prima lista</text>
  <text x="290" y="945" font-family="Arial" font-size="14" text-anchor="middle">nella tupla</text>

  <!-- Titoli delle colonne -->
  <text x="480" y="900" font-family="Arial" font-size="20" text-anchor="middle" font-weight="bold">Variabile</text>
  <text x="680" y="900" font-family="Arial" font-size="20" text-anchor="middle" font-weight="bold">Memoria</text>
  
  <!-- Box variabile t -->
  <rect x="400" y="950" width="160" height="60" rx="10" ry="10" fill="#4da6ff" stroke="#0066cc" stroke-width="2" />
  <text x="480" y="990" font-family="Arial" font-size="18" text-anchor="middle" fill="#ffffff">t =</text>

  <!-- Box variabile t_copia -->
  <rect x="400" y="1020" width="160" height="60" rx="10" ry="10" fill="#4da6ff" stroke="#0066cc" stroke-width="2" />
  <text x="480" y="1060" font-family="Arial" font-size="18" text-anchor="middle" fill="#ffffff">t_copia =</text>

  <!-- Box memoria della tupla -->
  <rect x="600" y="980" width="160" height="60" rx="10" ry="10" fill="#ccffcc" stroke="#00cc00" stroke-width="2" />
  <text x="680" y="1005" font-family="Arial" font-size="16" text-anchor="middle">TUPLA</text>
  <text x="680" y="1025" font-family="Arial" font-size="14" text-anchor="middle">(1, [2,3,6], [4,5])</text>
  <text x="680" y="1045" font-family="Arial" font-size="12" text-anchor="middle" fill="#666666">id: 140423456789</text>
  
  <!-- Elementi individuali -->
  <rect x="580" y="1080" width="60" height="40" rx="5" ry="5" fill="#f2f2f2" stroke="#666666" stroke-width="1" />
  <text x="610" y="1105" font-family="Arial" font-size="16" text-anchor="middle">1</text>
  
  <rect x="650" y="1080" width="70" height="40" rx="5" ry="5" fill="#ffdddd" stroke="#cc0000" stroke-width="1" />
  <text x="685" y="1105" font-family="Arial" font-size="16" text-anchor="middle">[2, 3, 6]</text>
  <text x="685" y="1125" font-family="Arial" font-size="10" text-anchor="middle" fill="#666666">id: 140423456800</text>
  
  <rect x="730" y="1080" width="70" height="40" rx="5" ry="5" fill="#ffdddd" stroke="#cc0000" stroke-width="1" />
  <text x="765" y="1105" font-family="Arial" font-size="16" text-anchor="middle">[4, 5]</text>
  <text x="765" y="1125" font-family="Arial" font-size="10" text-anchor="middle" fill="#666666">id: 140423456811</text>

  <!-- Collegamenti -->
  <line x1="560" y1="975" x2="680" y2="975" stroke="#333333" stroke-width="1.5" marker-end="url(#arrowhead)" />
  <line x1="560" y1="1050" x2="680" y2="1050" stroke="#333333" stroke-width="1.5" marker-end="url(#arrowhead)" />
  <line x1="680" y1="1040" x2="610" y2="1080" stroke="#333333" stroke-width="1.5" marker-end="url(#arrowhead)" />
  <line x1="680" y1="1040" x2="685" y2="1080" stroke="#333333" stroke-width="1.5" marker-end="url(#arrowhead)" />
  <line x1="680" y1="1040" x2="765" y2="1080" stroke="#333333" stroke-width="1.5" marker-end="url(#arrowhead)" />
  
  <!-- Highlight della modifica -->
  <ellipse cx="700" cy="1105" rx="25" ry="15" fill="none" stroke="#ff0000" stroke-width="2" stroke-dasharray="5,3" />
  
  <!-- Spiegazione -->
  <text x="480" y="1160" font-family="Arial" font-size="14" text-anchor="middle">La modifica di un elemento mutabile (lista) all'interno della tupla</text>
  <text x="480" y="1180" font-family="Arial" font-size="14" text-anchor="middle">influisce su tutte le variabili che puntano alla stessa tupla.</text>
  <text x="480" y="1200" font-family="Arial" font-size="14" text-anchor="middle">La tupla stessa non è stata modificata - solo il contenuto di un suo elemento lo è.</text>

  <!-- Nota importante -->
  <rect x="180" y="1230" width="600" height="120" rx="10" ry="10" fill="#ffffcc" stroke="#ffcc00" stroke-width="1" />
  <text x="480" y="1255" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">Differenza fondamentale tra tuple e liste:</text>
  <text x="480" y="1285" font-family="Arial" font-size="14" text-anchor="middle">Con le liste, possiamo modificare sia il contenitore (aggiungendo, rimuovendo o sostituendo elementi)</text>
  <text x="480" y="1305" font-family="Arial" font-size="14" text-anchor="middle">che il contenuto degli elementi mutabili al suo interno.</text>
  <text x="480" y="1325" font-family="Arial" font-size="14" text-anchor="middle">Con le tuple, possiamo modificare solo il contenuto di elementi mutabili contenuti al loro interno,</text>
  <text x="480" y="1345" font-family="Arial" font-size="14" text-anchor="middle">ma non la struttura della tupla stessa (che rimane immutabile).</text>
</svg>
